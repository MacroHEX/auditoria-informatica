generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DATABASE_DIRECT_URL")
}

model Ticket {
  id                 String             @id @default(cuid())
  numero             String             @unique
  tipo               TipoTicket
  estado             EstadoTicket       @default(EnEspera)
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  llamadoAt          DateTime?
  clienteDocumento   String?
  clienteNombre      String
  clienteTelefono    String?
  tipoIdentificacion TipoIdentificacion
  llamado            LlamadoTicket?

  @@map("tickets")
}

model LlamadoTicket {
  id         String   @id @default(cuid())
  ticketId   String   @unique
  cajeroId   String
  llamadoAt  DateTime @default(now())
  completado Boolean  @default(false)
  ticket     Ticket   @relation(fields: [ticketId], references: [id], onDelete: Cascade)

  @@map("llamado_tickets")
}

enum TipoTicket {
  VENTANILLA
  CAJA
  ASESORIA
}

enum EstadoTicket {
  EnEspera
  Llamado
  Atendido
  Cancelado
}

enum TipoIdentificacion {
  CI
  PASAPORTE
  CEDULA_EXTRANJERA
  TELEFONO
}
